(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6799:(e,t,r)=>{Promise.resolve().then(r.bind(r,8177))},8177:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var a=r(5155),n=r(2115),o=r(2596),s=r(9688);let i="cardPositions",d="/cards.json";function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,o.$)(t))}async function c(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;for(let n=0;n<r;n++)try{let t=await fetch(e);if(console.log("res",t),!t.ok)throw Error("HTTP ".concat(t.status));return await t.json()}catch(e){t=e,n<r-1&&await new Promise(e=>setTimeout(e,a*Math.pow(2,n)))}throw t}function u(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:l("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function g(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:l("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function m(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:l("leading-none font-semibold",t),...r})}function x(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:l("px-6",t),...r})}var b=r(4624),h=r(2085);let p=(0,h.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function v(e){let{className:t,variant:r,asChild:n=!1,...o}=e,s=n?b.DX:"span";return(0,a.jsx)(s,{"data-slot":"badge",className:l(p({variant:r}),t),...o})}function y(e){let{card:t,onPositionChange:r}=e,[o,s]=(0,n.useState)(!1),[i,d]=(0,n.useState)({x:0,y:0}),l=(0,n.useRef)(null),c=(e,t)=>{if(!l.current)return;s(!0);let r=l.current.getBoundingClientRect();d({x:e-r.left,y:t-r.top})},b=e=>{let a,n;if(!o)return;if(e instanceof TouchEvent){if(0===e.touches.length)return;a=e.touches[0].clientX,n=e.touches[0].clientY}else a=e.clientX,n=e.clientY;let s=a-i.x,d=n-i.y,l=window.innerWidth-280,c=window.innerHeight-200,u=Math.max(0,Math.min(s,l)),g=Math.max(0,Math.min(d,c));r(t.id,u,g),e.preventDefault()},h=()=>{s(!1)};return n.useEffect(()=>(o?(document.addEventListener("mousemove",b),document.addEventListener("mouseup",h),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",h),document.addEventListener("touchcancel",h),document.body.style.cursor="grabbing",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",h),document.removeEventListener("touchcancel",h),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",h),document.removeEventListener("touchcancel",h),document.body.style.cursor="",document.body.style.userSelect=""}),[o,i]),(0,a.jsxs)(u,{ref:l,className:"absolute w-72 cursor-grab shadow-lg transition-shadow hover:shadow-xl dark:shadow-gray-800 gap-2 py-3 px-0 ".concat(o?"shadow-2xl scale-105 cursor-grabbing dark:shadow-gray-700":""," ").concat({"Security & Compliance":"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/50 dark:text-blue-200 dark:border-blue-700","Billing & Pricing":"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/50 dark:text-green-200 dark:border-green-700",Technology:"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/50 dark:text-purple-200 dark:border-purple-700","Cloud Concepts":"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/50 dark:text-orange-200 dark:border-orange-700",Governance:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:border-blue-700",Compute:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-700",Storage:"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900 dark:text-purple-200 dark:border-purple-700",Database:"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900 dark:text-orange-200 dark:border-orange-700",Networking:"bg-cyan-100 text-cyan-800 border-cyan-200 dark:bg-cyan-900 dark:text-cyan-200 dark:border-cyan-700",Monitoring:"bg-pink-100 text-pink-800 border-pink-200 dark:bg-pink-900 dark:text-pink-200 dark:border-pink-700"}[t.domain]||"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800/50 dark:text-gray-200 dark:border-gray-600"," border-2"),style:{left:t.x,top:t.y,zIndex:o?1e3:1,touchAction:"none"},onMouseDown:e=>{c(e.clientX,e.clientY),e.preventDefault()},onTouchStart:e=>{0!==e.touches.length&&(c(e.touches[0].clientX,e.touches[0].clientY),e.preventDefault())},children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(m,{className:"text-lg font-semibold leading-tight",children:t.title}),(0,a.jsx)(v,{variant:"secondary",className:"text-[10px] w-fit",children:t.domain})]}),(0,a.jsx)(x,{children:(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:t.description})})]})}let f=(0,h.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function k(e){let{className:t,variant:r,size:n,asChild:o=!1,...s}=e,i=o?b.DX:"button";return(0,a.jsx)(i,{"data-slot":"button",className:l(f({variant:r,size:n,className:t})),...s})}var w=r(6474),j=r(7863),N=r(6262),E=r(4481);let C=()=>(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center","data-cy":"loading-state",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 dark:border-amber-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-amber-800 dark:text-amber-200",children:"Loading your Boardify..."})]})}),S=n.memo(e=>{let{message:t,onRetry:r}=e;return(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md","data-cy":"error-state",children:[(0,a.jsx)("p",{className:"text-red-800 dark:text-red-200 mb-4",children:t}),(0,a.jsx)(k,{onClick:r,"data-cy":"retry-button",children:"Try Again"})]})})});S.displayName="ErrorView";let L=n.memo(e=>{let{stats:t}=e;return(0,a.jsx)("div",{className:"flex items-center gap-2 mt-3 mb-3","aria-label":"domain summary",children:t.map(e=>{let{name:t,count:r}=e;return(0,a.jsxs)(v,{variant:"secondary",className:"text-xs","data-cy":"badge-".concat(t),children:[t," (",r,")"]},t)})})});L.displayName="DomainBadgeList";let A=n.memo(e=>{let{isCollapsed:t,toggleCollapse:r,cardCount:n,domainStats:o,onResetZoom:s,onZoomIn:i,onZoomOut:d,currentScale:l}=e;return(0,a.jsx)("div",{className:"absolute top-4 right-4 z-50 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg shadow-lg border dark:border-gray-700",children:(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{"aria-expanded":!t,"aria-label":"Toggle header",onClick:r,className:"flex items-center gap-3 bg-transparent p-0","data-cy":"header-toggle",style:{border:"none",background:"none"},children:[(0,a.jsx)("h1",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:"Boardify"}),(0,a.jsxs)(v,{variant:"outline",className:"text-xs","data-cy":"card-count-badge",children:[n," cards"]}),t?(0,a.jsx)(w.A,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}):(0,a.jsx)(j.A,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})]}),!t&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex gap-2","data-cy":"control-buttons",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)(k,{size:"sm",variant:"outline",onClick:d,className:"text-xs bg-transparent","data-cy":"zoom-out-button",children:[(0,a.jsx)(N.A,{className:"w-3 h-3 mr-1","aria-hidden":!0}),"-"]}),(0,a.jsxs)(k,{size:"sm",variant:"outline",onClick:i,className:"text-xs bg-transparent","data-cy":"zoom-in-button",children:[(0,a.jsx)(E.A,{className:"w-3 h-3 mr-1","aria-hidden":!0}),"+"]}),(0,a.jsxs)("span",{className:"text-xs ml-1",children:[Math.round(100*l),"%"]})]}),(0,a.jsx)(k,{size:"sm",variant:"outline",onClick:s,className:"text-xs bg-transparent","data-cy":"reset-zoom-button",children:"Reset"})]})})]}),!t&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(L,{stats:o})})]})})});function z(){let{cards:e,domainStats:t,loading:r,error:o,handlePositionChange:s,resetPositions:l,exportLayout:u}=function(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)([]),[o,s]=(0,n.useState)(!0),[l,u]=(0,n.useState)(null),g=(0,n.useRef)([]),m=(0,n.useRef)(null),x=(0,n.useCallback)(()=>{try{let e=localStorage.getItem(i);if(!e)return{};let t=JSON.parse(e);if("object"!=typeof t||null===t)return{};return t}catch(e){return console.warn("Failed to parse saved positions from localStorage"),{}}},[]),b=(0,n.useCallback)(e=>{g.current=e,m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{try{let e=g.current.reduce((e,t)=>(e[t.id]={x:t.x,y:t.y},e),{});localStorage.setItem(i,JSON.stringify(e))}catch(e){console.warn("Failed to save positions to localStorage",e)}},300)},[]);(0,n.useEffect)(()=>{let e=!1;return(async()=>{console.time("loadCards"),s(!0);try{let r=await c(d);if(!Array.isArray(r))throw Error("cards.json did not return an array");if(r.length>0){let e=r[0];if("number"!=typeof e.id||"string"!=typeof e.title||"string"!=typeof e.domain)throw Error("cards.json has unexpected shape")}let n=x(),o=r.map(e=>{var t,r,a,o;return{...e,x:null!==(a=null===(t=n[e.id])||void 0===t?void 0:t.x)&&void 0!==a?a:e.x,y:null!==(o=null===(r=n[e.id])||void 0===r?void 0:r.y)&&void 0!==o?o:e.y}});if(!e){t(o),g.current=o;let e=Array.from(new Set(r.map(e=>e.domain)));a(e),u(null)}}catch(t){console.error("Error loading cards:",t),e||u("Failed to load cards. Please ensure cards.json exists and has valid data.")}finally{e||s(!1),console.timeEnd("loadCards")}})(),()=>{e=!0,m.current&&window.clearTimeout(m.current)}},[x]);let h=(0,n.useCallback)((e,r,a)=>{t(t=>{let n=t.map(t=>t.id===e?{...t,x:r,y:a}:t);return b(n),n})},[b]),p=(0,n.useCallback)(async()=>{try{let e=await c(d);if(!Array.isArray(e))throw Error("cards.json did not return an array");t(e),g.current=e,localStorage.removeItem(i),u(null)}catch(e){console.error("Failed to reset positions:",e),u("Unable to reset positions at this time.")}},[]),v=(0,n.useCallback)(()=>{try{let t=e.map(e=>({id:e.id,title:e.title,x:e.x,y:e.y})),r=JSON.stringify(t,null,2),a=new Blob([r],{type:"application/json"}),n=URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.download="cardboard-layout.json",o.click(),URL.revokeObjectURL(n)}catch(e){console.error("Export layout failed:",e),u("Failed to export layout.")}},[e]),y=(0,n.useMemo)(()=>Array.isArray(r)&&Array.isArray(e)?r.map(t=>({name:t,count:e.filter(e=>e.domain===t).length})):[],[r,e]);return{cards:e,domains:r,loading:o,error:l,domainStats:y,handlePositionChange:h,resetPositions:p,exportLayout:v}}(),[g,m]=(0,n.useState)(!1),x=(0,n.useCallback)(()=>m(e=>!e),[]),[b,h]=(0,n.useState)(1),[p,v]=(0,n.useState)({x:0,y:0}),f=n.useRef(null),k=(e,t,r)=>Math.max(t,Math.min(r,e)),w=e=>{if(!f.current)return;let t=f.current.getBoundingClientRect(),r=t.width/2,a=t.height/2,n=k(b*e,.2,3),o=(r-p.x)/b,s=(a-p.y)/b;h(n),v({x:r-o*n,y:a-s*n})};return r?(0,a.jsx)(C,{}):o?(0,a.jsx)(S,{message:o,onRetry:l}):(0,a.jsxs)("div",{ref:f,onWheel:e=>{if(e.ctrlKey||e.metaKey){if(e.preventDefault(),!f.current)return;let t=f.current.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top,n=k(b*Math.exp(-(.002*e.deltaY)),.2,3),o=(r-p.x)/b,s=(a-p.y)/b;h(n),v({x:r-o*n,y:a-s*n})}else e.altKey&&(e.preventDefault(),v(t=>({x:t.x-e.deltaY,y:t.y})))},className:"relative w-screen h-screen bg-white dark:bg-gray-900 overflow-hidden","data-cy":"digital-cardboard-root",children:[(0,a.jsx)(A,{isCollapsed:g,toggleCollapse:x,cardCount:e.length,domainStats:t,onReset:l,onExport:u,onResetZoom:()=>{h(1),v({x:0,y:0})},onZoomIn:()=>w(1.1),onZoomOut:()=>w(1/1.1),currentScale:b}),(0,a.jsxs)("div",{style:{transform:"translate(".concat(p.x,"px, ").concat(p.y,"px) scale(").concat(b,")"),transformOrigin:"0 0",width:"100%",height:"100%"},children:[e.map(e=>(0,a.jsx)(y,{card:e,onPositionChange:s},e.id)),(0,a.jsx)("div",{className:"absolute inset-0 opacity-10 dark:opacity-5 pointer-events-none","aria-hidden":"true",style:{backgroundImage:"\n              linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px),\n              linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px)\n            ",backgroundSize:"50px 50px"}})]})]})}A.displayName="LayoutControls"}},e=>{var t=t=>e(e.s=t);e.O(0,[616,441,684,358],()=>t(6799)),_N_E=e.O()}]);